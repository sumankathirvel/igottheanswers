{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"C:/Users/DELL/Desktop/quora-clone-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Avatar}from\"@material-ui/core\";import React,{useEffect,useState}from\"react\";import\"./Post.css\";import{useDispatch,useSelector}from\"react-redux\";import{selectUser}from\"../features/userSlice\";import Modal from\"react-modal\";import db from\"../firebase\";import{selectQuestionId,setQuestionInfo}from\"../features/questionSlice\";import firebase from\"firebase\";function Post(_ref){var Id=_ref.Id,question=_ref.question,imageUrl=_ref.imageUrl,timestamp=_ref.timestamp,users=_ref.users;var user=useSelector(selectUser);var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),IsmodalOpen=_useState2[0],setIsModalOpen=_useState2[1];var questionId=useSelector(selectQuestionId);var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),answer=_useState4[0],setAnswer=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),getAnswers=_useState6[0],setGetAnswers=_useState6[1];useEffect(function(){if(questionId){db.collection(\"questions\").doc(questionId).collection(\"answer\").orderBy(\"timestamp\",\"desc\").onSnapshot(function(snapshot){return setGetAnswers(snapshot.docs.map(function(doc){return{id:doc.id,answers:doc.data()};}));});}},[questionId]);var handleAnswer=function handleAnswer(e){e.preventDefault();if(questionId){db.collection(\"questions\").doc(questionId).collection(\"answer\").add({user:user,answer:answer,questionId:questionId,timestamp:firebase.firestore.FieldValue.serverTimestamp()});}console.log(questionId);setAnswer(\"\");setIsModalOpen(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"post\",onClick:function onClick(){return dispatch(setQuestionInfo({questionId:Id,questionName:question}));},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"post__info\",children:[/*#__PURE__*/_jsx(Avatar,{src:users.photo?users.photo:\"https://images-platform.99static.com//_QXV_u2KU7-ihGjWZVHQb5d-yVM=/238x1326:821x1909/fit-in/500x500/99designs-contests-attachments/119/119362/attachment_119362573\"}),/*#__PURE__*/_jsx(\"h4\",{children:users.displayName?users.displayName:users.email}),/*#__PURE__*/_jsx(\"small\",{children:new Date(timestamp===null||timestamp===void 0?void 0:timestamp.toDate()).toLocaleString()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"post__body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"post__question\",children:[/*#__PURE__*/_jsx(\"p\",{children:question}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setIsModalOpen(true);},className:\"post__btnAnswer\",children:\"Answer\"}),/*#__PURE__*/_jsxs(Modal,{isOpen:IsmodalOpen,onRequestClose:function onRequestClose(){return setIsModalOpen(false);},shouldCloseOnOverlayClick:false,style:{overlay:{width:680,height:550,backgroundColor:\"rgba(0,0,0,0.8)\",zIndex:\"1000\",top:\"50%\",left:\"50%\",marginTop:\"-250px\",marginLeft:\"-350px\"}},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal__question\",children:[/*#__PURE__*/_jsx(\"h1\",{children:question}),/*#__PURE__*/_jsxs(\"p\",{children:[\"asked by\",\" \",/*#__PURE__*/_jsx(\"span\",{className:\"name\",children:users.displayName?users.displayName:users.email}),\" \",\"\",\"on\",\" \",/*#__PURE__*/_jsx(\"span\",{className:\"name\",children:new Date(timestamp===null||timestamp===void 0?void 0:timestamp.toDate()).toLocaleString()})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal__answer\",children:/*#__PURE__*/_jsx(\"textarea\",{value:answer,onChange:function onChange(e){return setAnswer(e.target.value);},placeholder:\"Enter Your Answer\",type:\"text\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal__button\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"cancle\",onClick:function onClick(){return setIsModalOpen(false);},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"sumbit\",onClick:handleAnswer,className:\"add\",children:\"Add Answer\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"post__answer\",children:getAnswers.map(function(_ref2){var _answers$timestamp;var id=_ref2.id,answers=_ref2.answers;return/*#__PURE__*/_jsx(\"p\",{style:{position:\"relative\",paddingBottom:\"5px\"},children:Id===answers.questionId?/*#__PURE__*/_jsxs(\"span\",{children:[answers.answer,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{style:{position:\"absolute\",color:\"gray\",fontSize:\"small\",display:\"flex\",right:\"0px\"},children:/*#__PURE__*/_jsxs(\"span\",{style:{color:\"#b92b27\"},children:[answers.user.displayName?answers.user.displayName:answers.user.email,\" \",\"on\",\" \",new Date((_answers$timestamp=answers.timestamp)===null||_answers$timestamp===void 0?void 0:_answers$timestamp.toDate()).toLocaleString()]})})]}):\"\"},id);})}),/*#__PURE__*/_jsx(\"img\",{src:imageUrl,alt:\"\"})]})]});}export default Post;","map":{"version":3,"sources":["C:/Users/DELL/Desktop/quora-clone-master/src/components/Post.js"],"names":["Avatar","React","useEffect","useState","useDispatch","useSelector","selectUser","Modal","db","selectQuestionId","setQuestionInfo","firebase","Post","Id","question","imageUrl","timestamp","users","user","dispatch","IsmodalOpen","setIsModalOpen","questionId","answer","setAnswer","getAnswers","setGetAnswers","collection","doc","orderBy","onSnapshot","snapshot","docs","map","id","answers","data","handleAnswer","e","preventDefault","add","firestore","FieldValue","serverTimestamp","console","log","questionName","photo","displayName","email","Date","toDate","toLocaleString","overlay","width","height","backgroundColor","zIndex","top","left","marginTop","marginLeft","target","value","position","paddingBottom","color","fontSize","display","right"],"mappings":"uPAAA,OAASA,MAAT,KAAuB,mBAAvB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAO,YAAP,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,UAAT,KAA2B,uBAA3B,CACA,MAAOC,CAAAA,KAAP,KAAkB,aAAlB,CACA,MAAOC,CAAAA,EAAP,KAAe,aAAf,CACA,OAASC,gBAAT,CAA2BC,eAA3B,KAAkD,2BAAlD,CACA,MAAOC,CAAAA,QAAP,KAAqB,UAArB,CAEA,QAASC,CAAAA,IAAT,MAA4D,IAA5CC,CAAAA,EAA4C,MAA5CA,EAA4C,CAAxCC,QAAwC,MAAxCA,QAAwC,CAA9BC,QAA8B,MAA9BA,QAA8B,CAApBC,SAAoB,MAApBA,SAAoB,CAATC,KAAS,MAATA,KAAS,CAC1D,GAAMC,CAAAA,IAAI,CAAGb,WAAW,CAACC,UAAD,CAAxB,CACA,GAAMa,CAAAA,QAAQ,CAAGf,WAAW,EAA5B,CAF0D,cAIpBD,QAAQ,CAAC,KAAD,CAJY,wCAInDiB,WAJmD,eAItCC,cAJsC,eAK1D,GAAMC,CAAAA,UAAU,CAAGjB,WAAW,CAACI,gBAAD,CAA9B,CAL0D,eAM9BN,QAAQ,CAAC,EAAD,CANsB,yCAMnDoB,MANmD,eAM3CC,SAN2C,8BAOtBrB,QAAQ,CAAC,EAAD,CAPc,yCAOnDsB,UAPmD,eAOvCC,aAPuC,eAS1DxB,SAAS,CAAC,UAAM,CACd,GAAIoB,UAAJ,CAAgB,CACdd,EAAE,CAACmB,UAAH,CAAc,WAAd,EACGC,GADH,CACON,UADP,EAEGK,UAFH,CAEc,QAFd,EAGGE,OAHH,CAGW,WAHX,CAGwB,MAHxB,EAIGC,UAJH,CAIc,SAACC,QAAD,QACVL,CAAAA,aAAa,CACXK,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAkB,SAACL,GAAD,QAAU,CAAEM,EAAE,CAAEN,GAAG,CAACM,EAAV,CAAcC,OAAO,CAAEP,GAAG,CAACQ,IAAJ,EAAvB,CAAV,EAAlB,CADW,CADH,EAJd,EASD,CACF,CAZQ,CAYN,CAACd,UAAD,CAZM,CAAT,CAcA,GAAMe,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,CAAD,CAAO,CAC1BA,CAAC,CAACC,cAAF,GAEA,GAAIjB,UAAJ,CAAgB,CACdd,EAAE,CAACmB,UAAH,CAAc,WAAd,EAA2BC,GAA3B,CAA+BN,UAA/B,EAA2CK,UAA3C,CAAsD,QAAtD,EAAgEa,GAAhE,CAAoE,CAClEtB,IAAI,CAAEA,IAD4D,CAElEK,MAAM,CAAEA,MAF0D,CAGlED,UAAU,CAAEA,UAHsD,CAIlEN,SAAS,CAAEL,QAAQ,CAAC8B,SAAT,CAAmBC,UAAnB,CAA8BC,eAA9B,EAJuD,CAApE,EAMD,CACDC,OAAO,CAACC,GAAR,CAAYvB,UAAZ,EACAE,SAAS,CAAC,EAAD,CAAT,CACAH,cAAc,CAAC,KAAD,CAAd,CACD,CAdD,CAeA,mBACE,aACE,SAAS,CAAC,MADZ,CAEE,OAAO,CAAE,yBACPF,CAAAA,QAAQ,CACNT,eAAe,CAAC,CACdY,UAAU,CAAET,EADE,CAEdiC,YAAY,CAAEhC,QAFA,CAAD,CADT,CADD,EAFX,wBAWE,aAAK,SAAS,CAAC,YAAf,wBACE,KAAC,MAAD,EACE,GAAG,CACDG,KAAK,CAAC8B,KAAN,CACI9B,KAAK,CAAC8B,KADV,CAEI,oKAJR,EADF,cAQE,oBAAK9B,KAAK,CAAC+B,WAAN,CAAoB/B,KAAK,CAAC+B,WAA1B,CAAwC/B,KAAK,CAACgC,KAAnD,EARF,cASE,uBAAQ,GAAIC,CAAAA,IAAJ,CAASlC,SAAT,SAASA,SAAT,iBAASA,SAAS,CAAEmC,MAAX,EAAT,EAA8BC,cAA9B,EAAR,EATF,GAXF,cAsBE,aAAK,SAAS,CAAC,YAAf,wBACE,aAAK,SAAS,CAAC,gBAAf,wBACE,mBAAItC,QAAJ,EADF,cAEE,eACE,OAAO,CAAE,yBAAMO,CAAAA,cAAc,CAAC,IAAD,CAApB,EADX,CAEE,SAAS,CAAC,iBAFZ,oBAFF,cAQE,MAAC,KAAD,EACE,MAAM,CAAED,WADV,CAEE,cAAc,CAAE,gCAAMC,CAAAA,cAAc,CAAC,KAAD,CAApB,EAFlB,CAGE,yBAAyB,CAAE,KAH7B,CAIE,KAAK,CAAE,CACLgC,OAAO,CAAE,CACPC,KAAK,CAAE,GADA,CAEPC,MAAM,CAAE,GAFD,CAGPC,eAAe,CAAE,iBAHV,CAIPC,MAAM,CAAE,MAJD,CAKPC,GAAG,CAAE,KALE,CAMPC,IAAI,CAAE,KANC,CAOPC,SAAS,CAAE,QAPJ,CAQPC,UAAU,CAAE,QARL,CADJ,CAJT,wBAiBE,aAAK,SAAS,CAAC,iBAAf,wBACE,oBAAK/C,QAAL,EADF,cAEE,gCACW,GADX,cAEE,aAAM,SAAS,CAAC,MAAhB,UACGG,KAAK,CAAC+B,WAAN,CAAoB/B,KAAK,CAAC+B,WAA1B,CAAwC/B,KAAK,CAACgC,KADjD,EAFF,CAIU,GAJV,CAKG,EALH,MAMK,GANL,cAOE,aAAM,SAAS,CAAC,MAAhB,UACG,GAAIC,CAAAA,IAAJ,CAASlC,SAAT,SAASA,SAAT,iBAASA,SAAS,CAAEmC,MAAX,EAAT,EAA8BC,cAA9B,EADH,EAPF,GAFF,GAjBF,cA+BE,YAAK,SAAS,CAAC,eAAf,uBACE,iBACE,KAAK,CAAE7B,MADT,CAEE,QAAQ,CAAE,kBAACe,CAAD,QAAOd,CAAAA,SAAS,CAACc,CAAC,CAACwB,MAAF,CAASC,KAAV,CAAhB,EAFZ,CAGE,WAAW,CAAC,mBAHd,CAIE,IAAI,CAAC,MAJP,EADF,EA/BF,cAuCE,aAAK,SAAS,CAAC,eAAf,wBACE,eAAQ,SAAS,CAAC,QAAlB,CAA2B,OAAO,CAAE,yBAAM1C,CAAAA,cAAc,CAAC,KAAD,CAApB,EAApC,oBADF,cAIE,eAAQ,IAAI,CAAC,QAAb,CAAsB,OAAO,CAAEgB,YAA/B,CAA6C,SAAS,CAAC,KAAvD,wBAJF,GAvCF,GARF,GADF,cA0DE,YAAK,SAAS,CAAC,cAAf,UACGZ,UAAU,CAACQ,GAAX,CAAe,0CAAGC,CAAAA,EAAH,OAAGA,EAAH,CAAOC,OAAP,OAAOA,OAAP,oBACd,UAAY,KAAK,CAAE,CAAE6B,QAAQ,CAAE,UAAZ,CAAwBC,aAAa,CAAE,KAAvC,CAAnB,UACGpD,EAAE,GAAKsB,OAAO,CAACb,UAAf,cACC,wBACGa,OAAO,CAACZ,MADX,cAEE,aAFF,cAGE,aACE,KAAK,CAAE,CACLyC,QAAQ,CAAE,UADL,CAELE,KAAK,CAAE,MAFF,CAGLC,QAAQ,CAAE,OAHL,CAILC,OAAO,CAAE,MAJJ,CAKLC,KAAK,CAAE,KALF,CADT,uBASE,cAAM,KAAK,CAAE,CAAEH,KAAK,CAAE,SAAT,CAAb,WACG/B,OAAO,CAACjB,IAAR,CAAa8B,WAAb,CACGb,OAAO,CAACjB,IAAR,CAAa8B,WADhB,CAEGb,OAAO,CAACjB,IAAR,CAAa+B,KAHnB,CAG0B,GAH1B,MAIK,GAJL,CAKG,GAAIC,CAAAA,IAAJ,qBAASf,OAAO,CAACnB,SAAjB,6CAAS,mBAAmBmC,MAAnB,EAAT,EAAsCC,cAAtC,EALH,GATF,EAHF,GADD,CAuBC,EAxBJ,EAAQlB,EAAR,CADc,EAAf,CADH,EA1DF,cAyFE,YAAK,GAAG,CAAEnB,QAAV,CAAoB,GAAG,CAAC,EAAxB,EAzFF,GAtBF,GADF,CAqHD,CAED,cAAeH,CAAAA,IAAf","sourcesContent":["import { Avatar } from \"@material-ui/core\";\nimport React, { useEffect, useState } from \"react\";\nimport \"./Post.css\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { selectUser } from \"../features/userSlice\";\nimport Modal from \"react-modal\";\nimport db from \"../firebase\";\nimport { selectQuestionId, setQuestionInfo } from \"../features/questionSlice\";\nimport firebase from \"firebase\";\n\nfunction Post({ Id, question, imageUrl, timestamp, users }) {\n  const user = useSelector(selectUser);\n  const dispatch = useDispatch();\n\n  const [IsmodalOpen, setIsModalOpen] = useState(false);\n  const questionId = useSelector(selectQuestionId);\n  const [answer, setAnswer] = useState(\"\");\n  const [getAnswers, setGetAnswers] = useState([]);\n\n  useEffect(() => {\n    if (questionId) {\n      db.collection(\"questions\")\n        .doc(questionId)\n        .collection(\"answer\")\n        .orderBy(\"timestamp\", \"desc\")\n        .onSnapshot((snapshot) =>\n          setGetAnswers(\n            snapshot.docs.map((doc) => ({ id: doc.id, answers: doc.data() }))\n          )\n        );\n    }\n  }, [questionId]);\n\n  const handleAnswer = (e) => {\n    e.preventDefault();\n\n    if (questionId) {\n      db.collection(\"questions\").doc(questionId).collection(\"answer\").add({\n        user: user,\n        answer: answer,\n        questionId: questionId,\n        timestamp: firebase.firestore.FieldValue.serverTimestamp(),\n      });\n    }\n    console.log(questionId);\n    setAnswer(\"\");\n    setIsModalOpen(false);\n  };\n  return (\n    <div\n      className=\"post\"\n      onClick={() =>\n        dispatch(\n          setQuestionInfo({\n            questionId: Id,\n            questionName: question,\n          })\n        )\n      }\n    >\n      <div className=\"post__info\">\n        <Avatar\n          src={\n            users.photo\n              ? users.photo\n              : \"https://images-platform.99static.com//_QXV_u2KU7-ihGjWZVHQb5d-yVM=/238x1326:821x1909/fit-in/500x500/99designs-contests-attachments/119/119362/attachment_119362573\"\n          }\n        />\n        <h4>{users.displayName ? users.displayName : users.email}</h4>\n        <small>{new Date(timestamp?.toDate()).toLocaleString()}</small>\n      </div>\n      <div className=\"post__body\">\n        <div className=\"post__question\">\n          <p>{question}</p>\n          <button\n            onClick={() => setIsModalOpen(true)}\n            className=\"post__btnAnswer\"\n          >\n            Answer\n          </button>\n          <Modal\n            isOpen={IsmodalOpen}\n            onRequestClose={() => setIsModalOpen(false)}\n            shouldCloseOnOverlayClick={false}\n            style={{\n              overlay: {\n                width: 680,\n                height: 550,\n                backgroundColor: \"rgba(0,0,0,0.8)\",\n                zIndex: \"1000\",\n                top: \"50%\",\n                left: \"50%\",\n                marginTop: \"-250px\",\n                marginLeft: \"-350px\",\n              },\n            }}\n          >\n            <div className=\"modal__question\">\n              <h1>{question}</h1>\n              <p>\n                asked by{\" \"}\n                <span className=\"name\">\n                  {users.displayName ? users.displayName : users.email}\n                </span>{\" \"}\n                {\"\"}\n                on{\" \"}\n                <span className=\"name\">\n                  {new Date(timestamp?.toDate()).toLocaleString()}\n                </span>\n              </p>\n            </div>\n            <div className=\"modal__answer\">\n              <textarea\n                value={answer}\n                onChange={(e) => setAnswer(e.target.value)}\n                placeholder=\"Enter Your Answer\"\n                type=\"text\"\n              />\n            </div>\n            <div className=\"modal__button\">\n              <button className=\"cancle\" onClick={() => setIsModalOpen(false)}>\n                Cancel\n              </button>\n              <button type=\"sumbit\" onClick={handleAnswer} className=\"add\">\n                Add Answer\n              </button>\n            </div>\n          </Modal>\n        </div>\n        <div className=\"post__answer\">\n          {getAnswers.map(({ id, answers }) => (\n            <p key={id} style={{ position: \"relative\", paddingBottom: \"5px\" }}>\n              {Id === answers.questionId ? (\n                <span>\n                  {answers.answer}\n                  <br />\n                  <span\n                    style={{\n                      position: \"absolute\",\n                      color: \"gray\",\n                      fontSize: \"small\",\n                      display: \"flex\",\n                      right: \"0px\",\n                    }}\n                  >\n                    <span style={{ color: \"#b92b27\" }}>\n                      {answers.user.displayName\n                        ? answers.user.displayName\n                        : answers.user.email}{\" \"}\n                      on{\" \"}\n                      {new Date(answers.timestamp?.toDate()).toLocaleString()}\n                    </span>\n                  </span>\n                </span>\n              ) : (\n                \"\"\n              )}\n            </p>\n          ))}\n        </div>\n        <img src={imageUrl} alt=\"\" />\n      </div>\n     \n    </div>\n  );\n}\n\nexport default Post;\n"]},"metadata":{},"sourceType":"module"}